<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üöÇ Dashboard Operacional FEPASA</title>
<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: #f4f6f8;
    color: #222;
    margin: 0;
    padding: 0;
  }

  header {
    background: #004b8d;
    color: white;
    text-align: center;
    padding: 18px 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }

  header h1 { font-size: 1.6em; margin: 0; }
  header p { margin: 4px 0 0; font-size: 0.9em; opacity: 0.9; }

  .filters {
    background: white;
    padding: 15px;
    border-bottom: 2px solid #004b8d;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
  }

  .filters label {
    font-weight: bold;
    color: #004b8d;
  }

  .filters input, .filters select {
    padding: 5px 8px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 0.9em;
  }

  .container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 25px;
    padding: 20px;
  }

  .card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    padding: 20px;
    width: 90%;
    max-width: 980px;
  }

  .card h2 { text-align: center; color: #004b8d; font-size: 1.3em; }

  iframe {
    border: none;
    width: 100%;
    height: 540px;
    border-radius: 10px;
  }

  footer {
    text-align: center;
    color: #555;
    padding: 15px;
    font-size: 0.8em;
  }

  @media (max-width: 768px) {
    iframe { height: 420px; }
  }
</style>
</head>
<body>

<header>
  <h1>üìä Dashboard Operacional ‚Äì FEPASA</h1>
  <p>Supervisi√≥n de carga y tiempos de proceso por subtrenada</p>
</header>

<!-- FILTROS -->
<div class="filters">
  <div>
    <label>Desde:</label><br>
    <input type="date" id="desde">
  </div>
  <div>
    <label>Hasta:</label><br>
    <input type="date" id="hasta">
  </div>
  <div>
    <label>Tren:</label><br>
    <select id="tren">
      <option value="">Todos</option>
      <option value="50601">50601</option>
      <option value="50602">50602</option>
      <option value="50603">50603</option>
    </select>
  </div>
  <div>
    <label>Subtrenada:</label><br>
    <select multiple id="subtrenada" size="3">
      <option value="50601-1">50601-1</option>
      <option value="50601-2">50601-2</option>
      <option value="50601-3">50601-3</option>
      <option value="50602-1">50602-1</option>
      <option value="50602-2">50602-2</option>
      <option value="50603-1">50603-1</option>
    </select>
  </div>
  <div>
    <label>Fecha y Hora de Cierre:</label><br>
    <select multiple id="cierre" size="3">
      <option value="2025-10-27T12:00">27/10/2025 12:00</option>
      <option value="2025-10-27T18:00">27/10/2025 18:00</option>
      <option value="2025-10-28T06:00">28/10/2025 06:00</option>
    </select>
  </div>
  <div style="align-self: end;">
    <button onclick="actualizarDashboard()" style="padding:8px 15px; background:#004b8d; color:white; border:none; border-radius:6px;">Actualizar</button>
  </div>
</div>

<!-- CONTENEDOR DE GRAFICOS -->
<div class="container">
  <div class="card">
    <h2>üîπ Tasa de Carga por Subtrenada</h2>
    <iframe id="iframeTasa"></iframe>
  </div>

  <div class="card">
    <h2>‚è± Tiempos de Proceso</h2>
    <iframe id="iframeTiempo"></iframe>
  </div>
</div>

<footer>
  üì§ Generado autom√°ticamente desde AppSheet ‚Äì Operaciones FEPASA  
  <br>¬© 2025 FEPASA | Supervisor de Operaciones: Linhart K.
</footer>

<script>
// --- DATOS DE EJEMPLO (simulan datos reales de AppSheet) ---
const datos = {
  "50601": { subtrenadas:["50601-1","50601-2","50601-3"], tasaL2:[5.2,5.5,5.6], tasaL3:[6.9,7.1,7.0], aviso:[35,42,28], retiro:[50,46,40]},
  "50602": { subtrenadas:["50602-1","50602-2"], tasaL2:[5.4,5.7], tasaL3:[7.0,7.3], aviso:[33,39], retiro:[47,44]},
  "50603": { subtrenadas:["50603-1"], tasaL2:[5.8], tasaL3:[7.2], aviso:[38], retiro:[52]}
};

// --- FUNCION PRINCIPAL ---
function actualizarDashboard(){
  const tren = document.getElementById("tren").value || "50601";
  const info = datos[tren];

  const subtrenadas = info.subtrenadas.join(",");
  const tasaL2 = info.tasaL2.join(",");
  const tasaL3 = info.tasaL3.join(",");
  const aviso = info.aviso.join(",");
  const retiro = info.retiro.join(",");

  const urlTasa = `svg_tasa.html?subtrenada_planificada=${subtrenadas}&tasaL2=${tasaL2}&tasaL3=${tasaL3}`;
  const urlTiempo = `svg_tiempo.html?subtrenada_planificada=${subtrenadas}&aviso_retiro=${aviso}&retiro_postura=${retiro}`;

  document.getElementById("iframeTasa").src = urlTasa;
  document.getElementById("iframeTiempo").src = urlTiempo;
}

// Inicializar al cargar
actualizarDashboard();
</script>

</body>
</html>

