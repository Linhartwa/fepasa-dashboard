<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Tasa de Carga FEPASA</title>
  <style>
    body { font-family: Arial; text-align: center; background: #f8f9fa; }
    svg { margin-top: 40px; }
    .label { font-size: 12px; fill: #333; }
    .axis { font-size: 14px; font-weight: bold; }
    .linea { stroke-dasharray: 5 5; }
  </style>
</head>
<body>

<h2>ðŸ“Š Tasa de carga por subtrenada</h2>
<svg id="chart" width="600" height="400"></svg>

<script>
const params = new URLSearchParams(window.location.search);
const subtrenadas = params.get("subtrenada_planificada")?.split(",") || [];
const tasaL2 = parseFloat(params.get("tasaL2")) || 0;
const tasaL3 = parseFloat(params.get("tasaL3")) || 0;

// valores de referencia
const refL2 = 5.45;
const refL3 = 7.11;

const svg = document.getElementById("chart");
const barWidth = 80;
const gap = 40;
const baseY = 320;

// Dibujar barras dinÃ¡micas
subtrenadas.forEach((st, i) => {
  const x = 60 + i * (barWidth + gap);
  const alturaL2 = tasaL2 * 20;
  const alturaL3 = tasaL3 * 20;

  // barra L2 (azul)
  svg.innerHTML += `<rect x="${x}" y="${baseY - alturaL2}" width="${barWidth/2-5}" height="${alturaL2}" fill="#007BFF"></rect>
                    <text x="${x}" y="${baseY - alturaL2 - 5}" class="label">${tasaL2.toFixed(2)}h</text>`;

  // barra L3 (amarilla)
  svg.innerHTML += `<rect x="${x + barWidth/2}" y="${baseY - alturaL3}" width="${barWidth/2-5}" height="${alturaL3}" fill="#FFC107"></rect>
                    <text x="${x + barWidth/2}" y="${baseY - alturaL3 - 5}" class="label">${tasaL3.toFixed(2)}h</text>`;

  // nombre subtrenada
  svg.innerHTML += `<text x="${x + 20}" y="${baseY + 20}" class="axis">${st}</text>`;
});

// lÃ­neas de referencia
svg.innerHTML += `<line x1="40" y1="${baseY - refL2*20}" x2="550" y2="${baseY - refL2*20}" stroke="#007BFF" class="linea"/>
                  <text x="560" y="${baseY - refL2*20}" class="label">DiseÃ±o L2 (${refL2})</text>`;
svg.innerHTML += `<line x1="40" y1="${baseY - refL3*20}" x2="550" y2="${baseY - refL3*20}" stroke="#FFC107" class="linea"/>
                  <text x="560" y="${baseY - refL3*20}" class="label">DiseÃ±o L3 (${refL3})</text>`;
</script>

</body>
</html>

