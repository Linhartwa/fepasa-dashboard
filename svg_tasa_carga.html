<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tasa de Carga</title>
<style>
  body {
    background: #fff;
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
  }
  svg {
    width: 100%;
    height: 260px;
  }
  .label {
    font-size: 14px;
    fill: #333;
    font-weight: bold;
  }
  .value {
    font-size: 12px;
    fill: #111;
  }
  .linea-diseno {
    stroke-dasharray: 4;
    stroke-width: 2;
  }
</style>
</head>
<body>

<svg id="grafico" viewBox="0 0 400 220"></svg>

<script>
function getParam(name) {
  const params = new URLSearchParams(window.location.search);
  return parseFloat(params.get(name)) || 0;
}

const tasaL2 = getParam("tasaL2");
const tasaL3 = getParam("tasaL3");

const svg = document.getElementById("grafico");
const max = Math.max(tasaL2, tasaL3, 8); // escala dinámica

// Escalador simple para altura
const escala = valor => (valor / max) * 150;
const baseY = 180;

// Líneas de diseño
const lineas = [
  { y: 5.45, color: "blue", label: "Diseño L2 (5.45)" },
  { y: 7.11, color: "orange", label: "Diseño L3 (7.11)" }
];

// Dibujar líneas de diseño
lineas.forEach(l => {
  const y = baseY - escala(l.y);
  svg.innerHTML += `
    <line x1="40" y1="${y}" x2="340" y2="${y}" stroke="${l.color}" class="linea-diseno"/>
    <text x="345" y="${y + 4}" class="value" fill="${l.color}">${l.label}</text>
  `;
});

// Barras de tasas reales
const barras = [
  { x: 100, color: "blue", valor: tasaL2, label: "Tasa L2" },
  { x: 220, color: "orange", valor: tasaL3, label: "Tasa L3" }
];

barras.forEach(b => {
  const altura = escala(b.valor);
  const y = baseY - altura;

  svg.innerHTML += `
    <rect x="${b.x}" y="${y}" width="60" height="${altura}" fill="${b.color}" rx="4"/>
    <text x="${b.x + 10}" y="${y - 8}" class="value">${b.valor.toFixed(2)}</text>
    <text x="${b.x + 10}" y="${baseY + 20}" class="label">${b.label}</text>
  `;
});
</script>

</body>
</html>
